<br>

<div class="container">
  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">
          <form [formGroup]="temperatureForm" autocomplete="off" (ngSubmit)="addLog()">
            <div class="row">
              <div class="col s12 m3">
                <mat-card-content>
                  <mat-form-field>
                    <input matInput type="number" placeholder="Enter temperature" formControlName="temperature" id="temperature" class="temperature-value" />
                    <mat-error *ngIf="hasError('temperature', 'max')">Temperature should be less than 100 °c</mat-error>
                    <mat-error *ngIf="hasError('temperature', 'min')">Temperature should be more than -100 °c</mat-error>
                    <mat-error *ngIf="hasError('temperature', 'required')">* A valid number is required</mat-error>
                  </mat-form-field>
                </mat-card-content>
              </div>
              <div class="col s12 m9">
                <button class="btn btn-add waves-effect waves-light" type="submit" name="action" [disabled]="!temperatureForm.valid">Add Temperature</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content center">
            <div *ngIf="!loadingStatistics">Average: 
              <span *ngIf="temperatures.length > 0 && statistics.average">{{ statistics.average | number : '1.0-2' }} °c</span>
              <span *ngIf="temperatures.length == 0 || !statistics.average">N/A</span>
            </div>
            <app-spinner *ngIf="loadingStatistics"></app-spinner>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content center">
            <div *ngIf="!loadingStatistics">Highest: 
              <span *ngIf="temperatures.length > 0 && statistics.highest">{{ statistics.highest | number : '1.0-2' }} °c</span>
              <span *ngIf="temperatures.length == 0 || !statistics.highest">N/A</span>
            </div>
            <app-spinner *ngIf="loadingStatistics"></app-spinner>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content center">
            <div *ngIf="!loadingStatistics">Lowest: 
              <span *ngIf="temperatures.length > 0 && statistics.lowest">{{ statistics.lowest | number : '1.0-2' }} °c</span>
              <span *ngIf="temperatures.length == 0 || !statistics.lowest">N/A</span>
            </div>
            <app-spinner *ngIf="loadingStatistics"></app-spinner>
        </div>
      </div>
    </div>
    <div class="col s12 m6 l3">
      <div class="card">
        <div class="card-content center">
            <div *ngIf="!loadingStatistics">Median: 
              <span *ngIf="temperatures.length > 0 && statistics.median">{{ statistics.median | number : '1.0-2' }} °c</span>
              <span *ngIf="temperatures.length == 0 || !statistics.median">N/A</span>
            </div>
            <app-spinner *ngIf="loadingStatistics"></app-spinner>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col s12">
      <div class="card">
        <div class="card-content">

          <div *ngIf="loadingLogs" class="center">
            <app-spinner></app-spinner>
          </div>

          <div *ngIf="!loadingLogs && temperatures.length == 0" class="center">
            There are no records to show.
          </div>

          <table *ngIf="!loadingLogs && temperatures.length > 0" class="striped">
            <thead>
              <tr>
                  <th>Date</th>
                  <th>Temperature</th>
                  <th></th>
              </tr>
            </thead>

            <tbody>
              <tr *ngFor="let temperature of temperatures">
                <td>{{ temperature.dateLogged | date: 'MMM dd, yyyy'}}</td>
                <td>{{ temperature.value | number : '1.0-2' }} °c</td>
                <td>
                   <button class="btn waves-effect waves-light btn-small right" type="button" name="action" (click)="deleteLog(temperature._id)">Delete</button>
                </td>
              </tr>
                            
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

</div>